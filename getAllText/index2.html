<!DOCTYPE html>
<html>

<head>
	<title>Template</title>
	<meta charset="UTF-8" />
  <style>
  </style>
</head>

<body>
	<div id="l1">
    <span>1</span>
    <div id="l2">
      <span>2</span>
      <div id="l3">
        <span>3</span>
        <div id="l4">
          <span>4</span>
        </div>
      </div>
    </div>
  </div>
	<div id="x1">
    <span>5</span>
    <div id="x2">
      <span>6</span>
      <div id="x3">
        <span>7</span>
        <div id="x4">
          <span>8</span>
        </div>
      </div>
    </div>
  </div>
	<script>
    const getAllText = (node) => {
      const allText = [];

      // getNodeText
      const getNodeText = (node) => {
        if (node && node.children && node.children.length) {
          console.log(node.children)
          console.log(node.childNodes)
          // node.children.forEach((child) => {
          //   if (child.nodeName.toLowerCase() !== 'script') {
          //     getNodeText(child);
          //   }
          // });
          for (let i = 0; i < node.children.length; i++) {
            const child = node.children[i];
            if (child.nodeName.toLowerCase() !== 'script') {
              getNodeText(child);
            }
          }
        } else {
          // const cleanText = node.nodeValue.replace(/\s+/, '')
          // if (cleanText) allText.push(node.nodeValue)
          allText.push(node.innerText)
        }
        // console.log(node.children);
        console.log('-----------');
        // console.log(node.children.forEach((child) => console.log(child.nodeName)));
        console.log(allText)
      };

      getNodeText(node);
      // return join of allText
    };

    console.log('test1----------');

    console.log('test2----------');
    console.log(getAllText(document.body));

	</script>
</body>

</html>