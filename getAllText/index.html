<!DOCTYPE html>
<html>

<head>
	<title>Template</title>
	<meta charset="UTF-8" />
  <style>
  </style>
</head>

<body>
	<div id="l1">
    <span>1</span>
    <div id="l2">
      <span>2</span>
      <div id="l3">
        <span>3</span>
        <div id="l4">
          <span>4</span>
        </div>
      </div>
    </div>
  </div>
	<div id="x1">
    <span>5</span>
    <div id="x2">
      <span>6</span>
      <div id="x3">
        <span>7</span>
        <div id="x4">
          <span>8</span>
        </div>
      </div>
    </div>
  </div>
	<script>
    const getAllText = (node) => {
      const allText = [];

      const getNodeText = (node) => {
        console.log(node.childNodes)
        if (node && node.childNodes && node.childNodes.length) {
          node.childNodes.forEach((item) => {
            getNodeText(item);
          })
        } else {
          const cleanText = node.nodeValue.replace(/\s+/, '');
          console.log(node.nodeType)
          if (cleanText) allText.push(node.nodeValue)
        }
      };

      getNodeText(node);
      console.log(allText);
      const result = allText.join(', ');
      return result;
    };

    console.log('test1----------');
    console.log(document.body.innerText); // true
    console.log('test2----------');
    console.log(document.body);
    getAllText(document.body);
	</script>
</body>

</html>